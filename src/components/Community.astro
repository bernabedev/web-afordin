---
import Button from '../components/ui/Button.astro'
import UserCard from '../components/ui/UserCard.astro'
import users from '../data/comunity.json'

const col1 = users.filter((_, i) => i % 3 === 0)
const col2 = users.filter((_, i) => i % 3 === 1)
const col3 = users.filter((_, i) => i % 3 === 2)
---

<section class="flex w-full flex-col items-center justify-center gap-11 text-white">
  <!-- Título -->
  <div class="flex flex-col items-center gap-8 px-4 text-center">
    <h2 class="text-6xl drop-shadow-md">Comunidad</h2>
    <p class="text-lg md:text-xl">Conecta, colabora y encuentra apoyo en cada paso de tu camino.</p>
  </div>

  <!-- Columnas -->
  <div class="mt-6 flex h-[600px] w-full justify-center gap-6 overflow-hidden px-8">
    <div class="scroll-column scroll-left flex flex-col gap-4" data-direction="down">
      {col1.map((user, i) => <UserCard user={user} key={`col1-${i}`} />)}
    </div>
    <div class="scroll-column scroll-center flex flex-col gap-4" data-direction="up">
      {col2.map((user, i) => <UserCard user={user} key={`col2-${i}`} />)}
    </div>
    <div class="scroll-column scroll-right flex flex-col gap-4" data-direction="down">
      {col3.map((user, i) => <UserCard user={user} key={`col3-${i}`} />)}
    </div>
  </div>

  <!-- Botón -->
  <div class="z-20 mt-12">
    <Button href="#conocenos">Conócenos</Button>
  </div>
</section>

<script src="/js/scroll_loop.js" defer></script>

<style>
  :global(a[href='#conocenos']) {
    border-radius: 8px !important;
  }
</style>
